{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Host=${USP_Database__Host:-localhost};Port=${USP_Database__Port:-5432};Database=${USP_Database__Database:-usp_db};Username=${USP_Database__Username:-usp_app};Password=${USP_Database__Password};SSL Mode=Require;Trust Server Certificate=true;Maximum Pool Size=100;Minimum Pool Size=10"
  },
  "Database": {
    "Host": "${USP_Database__Host:-localhost}",
    "Port": 5432,
    "Database": "${USP_Database__Database:-usp_db}",
    "Username": "${USP_Database__Username:-usp_app}",
    "Password": "${USP_Database__Password}",
    "EnableSsl": true,
    "SslMode": "Require",
    "TrustServerCertificate": true,
    "MaxPoolSize": 100,
    "MinPoolSize": 10,
    "CommandTimeout": 30
  },
  "Redis": {
    "Host": "${USP_Redis__Host:-localhost}",
    "Port": 6379,
    "Password": "${USP_Redis__Password}",
    "EnableSsl": true,
    "Ssl": true,
    "AllowAdmin": false,
    "InstanceName": "USP:",
    "Database": 0,
    "ConnectTimeout": 5000,
    "SyncTimeout": 5000,
    "AbortOnConnectFail": false
  },
  "Email": {
    "SmtpHost": "localhost",
    "SmtpPort": 587,
    "EnableSsl": true,
    "SmtpUsername": "",
    "SmtpPassword": "",
    "FromEmail": "noreply@usp-security.local",
    "FromName": "USP Security Platform",
    "TimeoutSeconds": 30,
    "MaxRetries": 3
  },
  "Jwt": {
    "Issuer": "security-usp",
    "Audience": "security-api",
    "ExpirationMinutes": 60,
    "RefreshTokenExpirationDays": 7,
    "Algorithm": "RS256",
    "PublicKeyPath": "/etc/usp/keys/jwt-public.pem",
    "PrivateKeyPath": "/etc/usp/keys/jwt-private.pem",
    "RefreshTokenLength": 64
  },
  "Observability": {
    "ElasticsearchUri": "https://localhost:9200",
    "ElasticsearchUsername": "${USP_Elasticsearch__Username}",
    "ElasticsearchPassword": "${USP_Elasticsearch__Password}",
    "JaegerAgentHost": "localhost",
    "JaegerAgentPort": 6831,
    "PrometheusEndpoint": "/metrics",
    "LogIndexFormat": "usp-logs-{0:yyyy.MM.dd}"
  },
  "Encryption": {
    "KeySource": "Environment",
    "MasterKey": "",
    "KeyFilePath": "/etc/usp/keys/master.key",
    "AutoGenerateKeyFile": false,
    "HsmEnabled": false,
    "HsmPkcs11Library": "",
    "HsmSlotId": 0,
    "HsmKeyLabel": "",
    "EnableKeyRotation": false
  },
  "Kestrel": {
    "Endpoints": {
      "PrimaryHttps": {
        "Url": "https://+:8443",
        "Certificate": {
          "Path": "${USP_Certificates__Primary__Path:-/etc/usp/certs/usp-primary.pfx}",
          "Password": "${USP_Certificates__Primary__Password}"
        }
      },
      "AdminHttps": {
        "Url": "https://+:5001",
        "Certificate": {
          "Path": "${USP_Certificates__Admin__Path:-/etc/usp/certs/usp-admin.pfx}",
          "Password": "${USP_Certificates__Admin__Password}"
        }
      },
      "Grpc": {
        "Url": "https://+:50005",
        "Protocols": "Http2",
        "Certificate": {
          "Path": "${USP_Certificates__Grpc__Path:-/etc/usp/certs/usp-grpc.pfx}",
          "Password": "${USP_Certificates__Grpc__Password}"
        }
      },
      "Metrics": {
        "Url": "http://+:9090"
      }
    },
    "Limits": {
      "MaxConcurrentConnections": 1000,
      "MaxConcurrentUpgradedConnections": 100,
      "MaxRequestBodySize": 10485760,
      "KeepAliveTimeout": "00:02:00",
      "RequestHeadersTimeout": "00:00:30"
    }
  },
  "HealthChecks": {
    "TimeoutSeconds": 10,
    "IntervalSeconds": 30
  }
}
