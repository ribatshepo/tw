# ============================================================================
# USP (Unified Security Platform) - Environment Variables Template
# ============================================================================
#
# IMPORTANT: This file contains ONLY bootstrap credentials needed to start USP.
# After USP starts, all other secrets should be stored in USP's Vault.
#
# SECURITY:
# - Copy this file to .env and fill in actual values
# - NEVER commit .env to version control
# - Use generate-infrastructure-credentials.sh to generate secure passwords
# - Rotate credentials regularly
#
# ============================================================================

# ----------------------------------------------------------------------------
# Database Configuration (PostgreSQL) - BOOTSTRAP ONLY
# ----------------------------------------------------------------------------
# USP needs these to connect to PostgreSQL on first startup
# After initialization, database credentials can be rotated via USP Vault

USP_Database__Host=localhost
USP_Database__Port=5432
USP_Database__Database=usp_db
USP_Database__Username=usp_app
USP_Database__Password=CHANGE_ME_STRONG_PASSWORD_32_CHARS

# ----------------------------------------------------------------------------
# Redis Configuration - BOOTSTRAP ONLY
# ----------------------------------------------------------------------------
# USP needs these to connect to Redis on first startup

USP_Redis__Host=localhost
USP_Redis__Port=6379
USP_Redis__Password=CHANGE_ME_STRONG_PASSWORD_32_CHARS

# ----------------------------------------------------------------------------
# Master Encryption Key - BOOTSTRAP ONLY
# ----------------------------------------------------------------------------
# This key encrypts all secrets in the database
# Generate with: ./scripts/generate-master-key.sh
# CRITICAL: Back this up securely! Without it, encrypted data cannot be recovered.

USP_Encryption__MasterKey=CHANGE_ME_BASE64_ENCODED_32_BYTE_KEY

# ----------------------------------------------------------------------------
# TLS Certificates - BOOTSTRAP ONLY
# ----------------------------------------------------------------------------
# Paths to TLS certificates for HTTPS endpoints
# Development: Use ./scripts/generate-dev-certs.sh
# Production: Use actual certificates from your CA

# Primary API (port 8443)
USP_Certificates__Primary__Path=/etc/usp/certs/usp-primary.pfx
USP_Certificates__Primary__Password=CHANGE_ME_CERT_PASSWORD

# Admin API (port 5001)
USP_Certificates__Admin__Path=/etc/usp/certs/usp-admin.pfx
USP_Certificates__Admin__Password=CHANGE_ME_CERT_PASSWORD

# gRPC API (port 50005)
USP_Certificates__Grpc__Path=/etc/usp/certs/usp-grpc.pfx
USP_Certificates__Grpc__Password=CHANGE_ME_CERT_PASSWORD

# ----------------------------------------------------------------------------
# Observability - OPTIONAL
# ----------------------------------------------------------------------------
# Elasticsearch (for logging)
USP_Elasticsearch__Username=elastic
USP_Elasticsearch__Password=CHANGE_ME_ELASTICSEARCH_PASSWORD

# ----------------------------------------------------------------------------
# SMTP Email Configuration - OPTIONAL (for MFA email delivery)
# ----------------------------------------------------------------------------
USP_Email__SmtpUsername=
USP_Email__SmtpPassword=

# ----------------------------------------------------------------------------
# RabbitMQ Configuration - OPTIONAL (for event streaming)
# ----------------------------------------------------------------------------
USP_RabbitMQ__Host=localhost
USP_RabbitMQ__Port=5672
USP_RabbitMQ__Username=usp
USP_RabbitMQ__Password=CHANGE_ME_RABBITMQ_PASSWORD

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=https://+:8443;https://+:5001;https://+:50005;http://+:9090

# ----------------------------------------------------------------------------
# HSM Configuration - OPTIONAL (Hardware Security Module)
# ----------------------------------------------------------------------------
# Only needed if using HSM for key management
# USP_Encryption__HsmEnabled=false
# USP_Encryption__HsmPkcs11Library=/usr/lib/softhsm/libsofthsm2.so
# USP_Encryption__HsmSlotId=0
# USP_Encryption__HsmKeyLabel=usp-master-key
# USP_Encryption__HsmPin=CHANGE_ME_HSM_PIN

# ============================================================================
# END OF BOOTSTRAP CREDENTIALS
# ============================================================================
#
# All other secrets (service API keys, external integrations, etc.) should be
# stored in USP Vault after initialization using the init-secrets.sh script.
#
# ============================================================================
